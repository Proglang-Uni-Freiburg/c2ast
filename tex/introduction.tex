
\section{Introduction}
\label{sec:introduction}

Recursion in session types is almost always interpreted as
equirecursion. That is, the two session types $\TRec{\TOut \TInt X} $
and $\TRec{\TOut \TInt {\TOut \TInt X}} $ are considered equal because
their unfoldings as infinite trees are equal. That means, servers with
these types are interchangeable without breaking the protocol and
functions that expect arguments of one type also expect arguments of
the other.

Using an isorecursive interpretation the two types are not equal
because unrolling of the recursion is a distinct communication
step. Hence, channels of these two types are no longer
interchangeable.

However, for these particular types we can define a pair of conversion
functions
$f : \TFun{\TRec{\TOut \TInt X}}{\TRec{\TOut \TInt {\TOut \TInt X}}}$
and
$f' : \TFun{\TRec{\TOut \TInt {\TOut \TInt X}}}{\TRec{\TOut \TInt X}}$
that mediate between the two types. For example
\begin{align*}
  f &=       \ELam {c_1} \EFork{ \ELam {c_2} \ERec g {
      \begin{array}[t]{l}
      \ELam{(c_1, c_2)} \\
      \ELet{(x_2,c_2)}{\ERecv{(\EUnroll{c_2})}} \\
      \ELet{c_1}{\ESend{x_2}{(\EUnroll{c_1})}} \\
      \ELet{(x_2,c_2)}{\ERecv{({c_2})}} \\
      \ELet{c_1}{\ESend{x_2}{(\EUnroll{c_1})}} \\
        g \; ({c_1}, {c_2}) }
      \end{array}}
\end{align*}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "main"
%%% End:
